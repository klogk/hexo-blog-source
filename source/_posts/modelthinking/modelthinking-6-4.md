title: '[Coursera][ModelThinking][SRT] Section 6-4'
date: 2009-01-01 12:00
tags: ['Coursera', 'MOOC', 'ModelThinking']
---

﻿大家好 在本讲中 我们今天将讨论数据拟合 还记得
在上一讲中 我们讨论了简单的线性模型 那么 当我
通过那些数据画线时 现在问题来了 这是如何做到 你如何
通过数据画出最可能的线条？ 这是本讲的重点 让我们
回顾一会 还记得我们需要分类模型 我们有
r 平方的概念 它是你能够解释的部分的百分比 因此
在你的数据中有大量的偏差 你可以开始建模 并且问自己
你的模型可以解释多少部分 比如说 如果我有一组这里的数据
都是这些点 是吧 这些数据如果我在这仅仅取平均数
然后问 有多大的偏差？我要算出所有点的差值
会有很大的变化范围 当我
在这里画线时 我解释了很多点 实际上 这里 它显示我解释了87.2%
你想做的是如何在这些数据的中间划一条线
来尽可能的解释偏差 
还记住在我们的盒子例子 这是总偏差 53,000
仅仅有5200留下 所以5200除以53,000 也就是9.8%
这是剩下的 这就是说我们解释了90.2%的偏差
我想告诉你们你如何用画线来做同样的计算
而且告诉你如何做最可能的的线条 假设我有一堆数据
为了找到有多少偏差 我画了一个平均值 然后我
要找到这个距离 比如说 一个6还有这里的一个4
我需要做4减6再做平方得4 这里是一个点值为 8
8减6再平方 也得4 我
把这些偏差全部都加起来 得到总偏差 现在我要做的是
现在我要做的是对数据画条线 然后看看 现在离那条线的距离是多少？
并且通过画一条线 我解释了多少的偏差？
这是一个很简单的例子 有3个小孩
他们在不同的年级 他们穿不同尺寸的鞋子 
我想做的是预测 他们的鞋子的尺寸随他们在学校年级变化的函数
所以我会说如果鞋的尺寸是你年级的函数
所以有一年级的穿1号的鞋 二年级的穿5号的鞋 
4年级的穿9号的鞋 你知道我会选择一个
线性的模型 所以他们首先会问的是 偏差是多少？ 
所以 这是年级 这里是鞋的号码 现在我不关心年级的偏差
我关心的是我想解释的事情的偏差 也就是鞋的尺码
所以就是这个 是1 5和9 所以我用1
5和9 如果把它们加起来我得到15 除以3我得到5
平均值是5 所以要得到偏差我用1减5 然后取平方
得到16 5减5然后平方 得到0 然后9减5 
平方 也得到16 所以总偏差是32 所以我想要
做的是 想写下一个线性的模型 能够尽量的
解释偏差 让我们用一个非常简单的线性模型开始 我们
假设Y等于2X 所以我画这条线 Y等于2X 我想说的是这3个
点都应该在这条线上 是吧？这样偏差 
它们离这条线有多远 好的 怎么算？我有X和Y
当X等于1 2X是2 当X等于2 2X是4
当X=4 2X会是8 所以这是我的某种预测 2，4
和8 我想问实际数据会离这些预测有多远
这里 我预测了2但实际的值是1 所以我得到2减去1
再平方得到1 这里我预估了4而实际值是5所以我会
得到4减去5再平方 得到1 还有这里我预估了8
而实际值是9 所以8减去9是1 再平方我得到1
所以总值是3 所以我想哇 真不错
我从总偏差为32开始 现在我只得到了3 如何我想
算出我的r的平方 我就会说那是1 -  3除以32 
再一次，我会得到超过90% 其实是90+%
那真不错 我对偏差解释了很多 但是
我刚才只是编出了这个Y=2X  画了这条线
那我如何画最好的线呢？ 我能做的是 让我们假设
我画这条线Y=MX+B就是一条随意的线 然后我想要问
那条线离数据会有多远呢？ 好的 当X=1 我的预测会是M+B，
实际的值是1 所以我的误差将是M+B-1 再平方
下一个是2 我的模型说这个值是2M加上B
实际的值是5 所以那将是我的误差 
当X=4 这将是我的预测 
这将是我误差的平方 所以我如果想知道总的误差是多少 我就必须
把这所有的数乘起来 所以 M+B-1的平方会是M平方+2MB+B
平方-2M-2B+1 所以这是一个很复杂的事情 我可以
对另外两个也这样做 那将会得到这些很长的方程 如果我
那样做 我将会得到 这里是我的总误差 所以这是，如何我选择
这条线，Y等于MX加B 这就是我的误差 这就是
微积分很棒的原因 你可以用数学来解决这个 找到b和m
那将会得到可能的最小的值 如果你那样做
你选择B等于-1 M等于8/3 所以这是
你如何画这条线 让我们用任何线
y等于mx加b 找到它离数据的距离
把所有的距离加起来 所以这个是和总偏差之间
的总距离  你想选择一个M和一个B 
以让那个值越小越好 结果发现最好的办法是让B等于-1
这里应该是一个小写的m M=8/3 当我们那样做的时候
我们的预估是 当X等于1 我们的模型说y = 8/3 x-1 
所以当x=1 我们会得到8/3乘1 减去1 所以那是
等于5/3 实际的值是1  所以 如果你看看
预估和实际偏差间的不同 将会是
2/3  所以我们会得到的是 他们对R平方的贡献
将会是2/3的平方 当我们看看5 当你选X=3 真实
的值会是5我们的模型 如果你在这里使用的话 将会给我们13/3 
那仍然是差了2/3 如果你看当X=4的情况 我们的模型给我们29除以3
实际值是9 也就是27除以3 那也是大
2/3 所以我们能得到的是我们的总偏差会是
2/3的平方加上2/3的平方加上2/3的平方 所以那是
差不多4/3 那是4/9乘以3 
得到12/9 也就是4/3 现在如果我想知道我的R的平方是多少
如果我把这些都暂时檫掉 我会得到的这个
我解释了多少数据 我有1 减去  4/3除以32  好的 现在
我已经解释了 超过95%的数据 所以通过
找到最佳的B和M 我可以做得更好 而不仅仅是
画的那条Y=2X的线 如果我把这个实际的线画出来 
它会象这样 和数据非常接近 所以
让我们继续 想一想 我们如何用多个变量呢? 假设
不是一个变量 而是有一组变量 那么现在我可以写
y=ax1+bx2+c 所以现在我得到了两个变量 而不是一个
当你看着这些东西时 这个正负号告诉你Y是随着X增加还是减少
另外就是回归可以告诉你 大小的量级 y
随x变化的有多少？让我们谈谈为什么这个
很重要 再一次 我们经常根据经验行事 让我们
假设你关心这个 我会讨论这个很多遍 因为这是
一个重要并且容易讨论的事情 学校的质量
我得到了孩子们的考试成绩 这是学习表现测试
我还有IQ的测试成绩 那是可以基本
代表他们的一种天生的能力 这里是教师质量 课堂大小 
我可以做一个回归 这个测试的结果
是A 因为我有截距的系数 还有
老师质量的系数 IQ 老师质量 班级大小
你可以预料到的是 班级尺寸的系数为负 你
预估老师质量的系数为正 IQ的系数为正
可是不用模型 我们不知道这里面的哪个大
我们甚至不知道我们直觉是否对  让我们看看
班级大小 最近我们有78人的课堂大小 这些中的4个
显示出了正的系数 13显示负系数 61显示没有
效果 这是某人做了综合调查的结果
78 回归研究 数据研究表明班级大小是有关系的
而你发现的是 只有13次是获得了预期的
负的效果 61次没有效果 4次实际上
是走了反的方向 即使我们认为课堂大小是有关系的 当即便它
真有关系时 聪明的班级可以得到更好的效果 但并不总是这样
教师质量如何？最近一些经济学家有个研究 
他们发现一个好的幼儿园教师价值$320,000
所以如果你有20个学生 结果发现那些学生可以
期望能够在他们一生的收入上多获得 $16,000的 如果他们有一个好的幼儿园老师的话
而不是一个坏的幼儿园老师  所以 通过把这些数据都
放进去 我们都预料班级大小会有影响 小班应该
是好的 教师质量也有关系 更好的老师也会更好 但是
当你把数据放进去后会发现 班级规模似乎不会影响什么 至少不会影响太多
至少在我们模拟的这个案例范围中不会影响太大 教师质量会产生很大影响 
所以 我们从中学到的是什么 我们学到的是 有很多数据存在
你可以做的一件事是 你可以将数据带进线性模型中 线性模型
可以见识一些百分比上的变化 也许能解释很多
也许能解释一点点 这些线性模型也会告诉我们参数的表现和量级
所以这将告诉我们是否有系数 有积极影响还是
消极影响 然后告诉我们这个影响有多大然后
允许我们作政策上的选择  要在教师质量
而不是在班级规模上作投资 因为教师质量影响更大 这就是
大系数思维 谢谢